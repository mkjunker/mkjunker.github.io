
<html>
  <head>
    <title>Displaying JSON Data</title>
    <script>
      // https://www.w3schools.com/jsref/met_document_addeventlistener.asp
      window.addEventListener('load',init,false);
      function init(e){
          documentLoader()
          // document.getElementById('myButton').addEventListener('click',documentLoader,false);
      }

      var output = ""

      function reqListener () {
          // convert the string from the file to an object with JSON.parse
          var obj = JSON.parse(this.responseText);

          date = new Date(obj.properties.timestamp);
          output += "<p>";
          output += date;
          output += "<br>";
          output += "Temperature: " + (obj.properties.temperature.value *
                                       9 / 5 + 32).toPrecision(2) + " F";
          output += "<br>"
          output += "Conditions: " + obj.properties.textDescription;
          output += "<br>";
          output += obj.properties.rawMessage;

          document.getElementById('output').innerHTML = output + "  $$$"

      }

      function documentLoader(){
          var oReq;
          var stations = ["KMWC", "KMKE"]
          for(sta in stations)
          {
              oReq = new XMLHttpRequest();
              oReq.onload = reqListener;
              oReq.open("get", "https://api.weather.gov/stations/" + stations[sta] + "/observations/latest", true);
              oReq.send();
          }
      }
    </script>
  </head>
  <body>
    <div id="output"></div>
  </body>
</html>
